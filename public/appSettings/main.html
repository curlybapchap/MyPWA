<!DOCTYPE html>
<html lang="en">

<head>
    <title>My PWA</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#86B426" />
    <meta name="description" content="The second screen for this PWA">
    <link rel="manifest" href="/app.webmanifest?1">
</head>

<body>
    <h2>Application Settings</h2>
    <hr />
    <section id="ButtonSection">
        <button type="button" onclick="RequestPersistStorage()">Persist Storage</button>
        <button type="button" onclick="RequestNotifications()">Request Notifications</button>
        <button type="button" onclick="RequestPushNotifications()">Request Push Notifications</button>
        <button type="button" onclick="DeviceMediaAccess()">Request Media Access</button>
        <button type="button" onclick="ListRegisteredSyncTags()">List Background Syncs</button>
        <button type="button" id="ReqLocationAccess">Request Location Access</button>
        <input type="text" onchange="BackgroundSyncAccess(this.value)">Register New Background Sync</button>
    </section>

    <p class="available">Periodic background sync can be used. Install the app first.</p>
    <p class="not-available">Periodic background sync cannot be used.</p>
    <h2>Last updated</h2>
    <p class="last-updated">Never</p>
    <h2>Registered tags</h2>
    <ul>
        <li>None yet.</li>
    </ul>

</body>

<script src="/public/appSettings/storage.js"></script>
<script src="/public/appSettings/notifications.js"></script>
<script src="/public/appSettings/pushNotifications.js"></script>
<script src="/public/appSettings/mediaDevices.js"></script>
<script src="/public/appSettings/periodicBackgroundSync.js"></script>
<script type="module">
    import * as Location from './geoLocation.js';
    document.getElementById("ReqLocationAccess").addEventListener("click", () => Location.RequestPermission());
</script>
<script>
    async function RequestPersistStorage() {
        await PersistData();
    }

    async function RequestPushNotifications() {
        await RequestPushNoticationsPermission();
    }

    async function DeviceMediaAccess() {
        await RequestMediaPermission();
    }

    async function BackgroundSyncAccess(syncName) {
        await RegisterPeriodicBackgroundSync(syncName);
    }
</script>

</html>